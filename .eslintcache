[{"/Users/dongyu/Downloads/weather-app-v2/src/index.js":"1","/Users/dongyu/Downloads/weather-app-v2/src/App.js":"2","/Users/dongyu/Downloads/weather-app-v2/src/reportWebVitals.js":"3","/Users/dongyu/Downloads/weather-app-v2/src/Components/Header.js":"4","/Users/dongyu/Downloads/weather-app-v2/src/Components/Home.js":"5","/Users/dongyu/Downloads/weather-app-v2/src/Components/Detail7Days.js":"6","/Users/dongyu/Downloads/weather-app-v2/src/Components/HomeBackground.js":"7","/Users/dongyu/Downloads/weather-app-v2/src/Components/DetailToday.js":"8","/Users/dongyu/Downloads/weather-app-v2/src/NavBar/Button.js":"9","/Users/dongyu/Downloads/weather-app-v2/src/NavBar/Navbar.js":"10","/Users/dongyu/Downloads/weather-app-v2/src/NavBar/MenuItem.js":"11","/Users/dongyu/Downloads/weather-app-v2/src/NavBar/Menuitem.js":"12"},{"size":500,"mtime":1612084454144,"results":"13","hashOfConfig":"14"},{"size":390,"mtime":1612188437098,"results":"15","hashOfConfig":"14"},{"size":362,"mtime":1612084454145,"results":"16","hashOfConfig":"14"},{"size":2782,"mtime":1612177606260,"results":"17","hashOfConfig":"14"},{"size":12247,"mtime":1612189472699,"results":"18","hashOfConfig":"14"},{"size":8310,"mtime":1612189471606,"results":"19","hashOfConfig":"14"},{"size":704,"mtime":1612174408888,"results":"20","hashOfConfig":"14"},{"size":1032,"mtime":1612175154612,"results":"21","hashOfConfig":"14"},{"size":602,"mtime":1612188300304,"results":"22","hashOfConfig":"14"},{"size":1275,"mtime":1612188341388,"results":"23","hashOfConfig":"14"},{"size":533,"mtime":1612188290289,"results":"24","hashOfConfig":"14"},{"size":533,"mtime":1612188290289,"results":"25","hashOfConfig":"14"},{"filePath":"26","messages":"27","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},"1dke8qu",{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"35","messages":"36","errorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37","usedDeprecatedRules":"28"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"28"},{"filePath":"44","messages":"45","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"46","messages":"47","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"48","messages":"49","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"50"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/dongyu/Downloads/weather-app-v2/src/index.js",[],["53","54","55","56","57"],"/Users/dongyu/Downloads/weather-app-v2/src/App.js",[],"/Users/dongyu/Downloads/weather-app-v2/src/reportWebVitals.js",[],"/Users/dongyu/Downloads/weather-app-v2/src/Components/Header.js",[],"/Users/dongyu/Downloads/weather-app-v2/src/Components/Home.js",["58","59","60","61","62","63","64","65","66"],"import React from 'react';\nimport { IoRainyOutline } from 'react-icons/io5';\nimport DetailToday from './DetailToday'\nimport HomePageBackground from './HomeBackground';\n/* eslint-disable camelcase */\n/* eslint-disable class-methods-use-this */\nimport Detail7Days from './Detail7Days'\n\n\n\nclass Home extends React.Component {\n    constructor(props) {\n        super(props)\n        const {inputCity} = this.props\n        this.state = {\n            currentCity: inputCity,\n            mainPageDisplay: true, // true即显示，false=>display:none\n            todayMonth:'',\n            todayDate:'',\n            todayHour:'',\n            todayMinute:'',\n            changeCity: ['','']\n        }\n    }\n\n    // 1. 只会在装载之前调用一次，在 render 之前调用\n    // componentWillMount(){\n    // }\n    \n    // 2. 只会在装载完成之后调用一次，在 render 之后调用\n    async componentDidMount() {\n        // 初始加载页面显示的信息\n        const{currentCity} = this.state\n        this.updateTime(currentCity)\n        this.updateWeather(currentCity)\n    }\n\n    // 3. 更新后 在render之后调用\n    // componentDidUpdate(){\n    // }\n    \n    \n    // 提交搜索后，更新今天时间和未来七天天气数据\n    handleSubmit = (e) => {\n        e.preventDefault()\n\n        // 先停止初始的setInterval,在进行新的计时\n        this.stopTime()\n        \n        const{changeCity} = this.state\n        const newCity = changeCity[0]\n        this.setState({\n            currentCity:newCity,\n        })\n\n        // 延迟1s消失主页，更新数据\n        setTimeout(() => {\n            this.setState({\n                mainPageDisplay:false\n            })\n        },1000)\n\n        // 等更新完current city后 再执行两个更新函数，否则同时执行，currentCity还是旧的信息\n        setTimeout(() => {\n            const{currentCity} = this.state\n            this.updateTime(currentCity)\n            this.updateWeather(currentCity)\n        },1)\n    }\n\n    // 提交搜索后，获取输入的地点信息，更改state\n    handleOnChangeCity = (e) => {\n        // console.log(e.target.value)\n        // 使用changeCity寄存输入的信息，避免文字在没提交前一直在变动\n        const{currentCity} = this.state\n        this.setState({\n            changeCity : [e.target.value,currentCity]\n        })\n    }\n\n    // 得到输入地点的实时时间\n    async getTime(currentCity) {\n\n        // 获取本机当地时间：\n        // const time = `${new Date().toString().slice(4,10)} ${new Date().toString().slice(16,24)}`\n        // document.getElementById('weatherPage__today--time').textContent = time;\n\n        // 获取用户输入地址对应的时间：\n        const apiUrl1 = `https://maps.googleapis.com/maps/api/geocode/`\n            +\n            `json?address=${currentCity}&key=AIzaSyCowgF-_iCq3G2JN4JaM-zj3fmD-7OQP30`\n        const response = await fetch(apiUrl1);\n        const data = await response.json();\n        const {geometry:{location:{lat,lng}}} = data.results[0] // 解构\n        console.log(apiUrl1)\n\n        const apiUrl2 = `https://api.openweathermap.org/data/2.5/`\n        +`weather?lat=${lat}&lon=${lng}&appid=9bf729522efcbfd825ccfbef7c8f2410`\n        console.log(apiUrl2)\n\n        const responseToday = await fetch(apiUrl2);\n        const dataToday = await responseToday.json();\n        const {timezone} = dataToday // 解构\n        const GMT = timezone/3600\n        \n        // (UTC) is equal to the local time minus(-) the UTC offset.\n        if(GMT===0) {\n        const apiUrl3 = `http://worldtimeapi.org/api/timezone/Etc/GMT`\n        console.log(apiUrl3)\n        const responseGMT = await fetch(apiUrl3);\n        const dataGMT = await responseGMT.json();\n        const {utc_datetime,utc_offset} = dataGMT // 解构\n        const month = utc_datetime.toString().slice(5,7)\n        const date2 = utc_datetime.toString().slice(8,10)\n        let hour = Number(utc_datetime.toString().slice(11,13))\n        const minute = utc_datetime.toString().slice(13,19)\n        hour -= Number(utc_offset.toString().slice(0,3))\n        // console.log(hour,minute)\n        const monthList = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']\n        const getMonth = monthList[month/1-1]\n        const information = [getMonth,date2,hour,minute]\n        // console.log(information)\n        \n        this.setState({\n            todayMonth:getMonth,\n            todayDate:date2,\n            todayHour:hour,\n            todayMinute:minute\n        })\n        return information            \n        //   document.getElementById('weatherPage__today--time').textContent = `${getMonth}.${date2} ${hour}${minute}`;\n\n        }if(GMT>0){\n        const apiUrl3 = `http://worldtimeapi.org/api/timezone/Etc/GMT+${GMT}`\n        console.log(apiUrl3)\n        const responseGMT = await fetch(apiUrl3);\n        const dataGMT = await responseGMT.json();\n        const {utc_datetime,utc_offset} = dataGMT // 解构\n        const month = utc_datetime.toString().slice(5,7)\n        const date2 = utc_datetime.toString().slice(8,10)\n        let hour = Number(utc_datetime.toString().slice(11,13))\n        const minute = utc_datetime.toString().slice(13,19)\n        hour -= Number(utc_offset.toString().slice(0,3))\n        // console.log(hour,minute)\n        const monthList = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']\n        const getMonth = monthList[month/1-1]\n        //   document.getElementById('weatherPage__today--time').textContent = `${getMonth}.${date2} ${hour}${minute}`;\n        const information = [getMonth,date2,hour,minute]\n        // console.log(information)\n        this.setState({\n            todayMonth:getMonth,\n            todayDate:date2,\n            todayHour:hour,\n            todayMinute:minute\n        })\n        return information\n        }\n        const apiUrl3 = `http://worldtimeapi.org/api/timezone/Etc/GMT${GMT}`\n        console.log(apiUrl3)\n        const responseGMT = await fetch(apiUrl3);\n        const dataGMT = await responseGMT.json();\n        const {utc_datetime,utc_offset} = dataGMT // 解构\n        const month = utc_datetime.toString().slice(5,7)\n        const date2 = utc_datetime.toString().slice(8,10)\n        let hour = Number(utc_datetime.toString().slice(11,13))\n        const minute = utc_datetime.toString().slice(13,19)\n        hour -= Number(utc_offset.toString().slice(0,3))\n        // console.log(hour,minute)\n        const monthList = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec']\n        const getMonth = monthList[month/1-1]\n        //   document.getElementById('weatherPage__today--time').textContent = `${getMonth}.${date2} ${hour}${minute}`;\n        const information = [getMonth,date2,hour,minute]\n        // console.log(information)\n        this.setState({\n            todayMonth:getMonth,\n            todayDate:date2,\n            todayHour:hour,\n            todayMinute:minute\n        })\n        return information \n    }\n\n    // 得到输入地点的实时天气\n    async getWeather (currentCity) {\n        // ------------------第1个api函数----------------\n        const apiUrl = `https://maps.googleapis.com/maps/api/geocode/`\n        +\n        `json?address=${currentCity}&key=AIzaSyCowgF-_iCq3G2JN4JaM-zj3fmD-7OQP30`\n        console.log(apiUrl);\n        const response = await fetch(apiUrl);\n        const data = await response.json();\n        const {geometry:{location:{lat,lng}}} = data.results[0] // 解构\n\n        // ------------------第二个api函数----------------\n        const apiUrlSecond = `https://api.openweathermap.org/data/2.5/`\n        +\n        `onecall?lat=${lat}&lon=${lng}&exclude=minutely,hourly,alerts`\n        +\n        `&appid=9bf729522efcbfd825ccfbef7c8f2410&units=metric`\n        console.log(apiUrlSecond)\n        const responseSecond = await fetch(apiUrlSecond);\n        const dataSecond = await responseSecond.json();\n \n        // 获取当天的温度 icon description 信息\n        const {temp} = dataSecond.current;\n        const {icon:todayIcon, main} = dataSecond.current.weather[0];\n        const todayTemp = temp.toString().split(\".\")[0];\n\n        document.getElementById('today--tep').textContent = todayTemp;\n        document.getElementById('today--icon').src = `http://openweathermap.org/img/wn/${todayIcon}@2x.png`;\n        document.getElementById('today--main').textContent = main;\n        document.getElementById('weatherPage__today--detail').textContent = currentCity;\n        \n      // 未来6天天气写入\n        for(let i=0; i<6; i+=1) {\n            const {max,min} = dataSecond.daily[i+1].temp;\n            const {icon} = dataSecond.daily[i+1].weather[0];\n            const highTemp = max.toString().split(\".\")[0];\n            const lowTemp = min.toString().split(\".\")[0];\n            const order = ['second','third','forth','fifth','sixth','seventh']\n\n            const idHigh = `${order[i]}--high`;\n            const idLow = `${order[i]}--low`;\n            const idIcon = `${order[i]}--icon`;\n            document.getElementById(`${idIcon}`).src = `http://openweathermap.org/img/wn/${icon}@2x.png`;\n            document.getElementById(`${idHigh}`).textContent = highTemp;\n            document.getElementById(`${idLow}`).textContent = lowTemp;\n        }\n    }\n\n    stopTime = () => clearInterval(this.timer)\n\n    // 更改页面display：none\n    changePage = () => {\n        const{mainPageDisplay} = this.state\n        console.log(mainPageDisplay)\n        if(!mainPageDisplay){\n            return \"mainPage__display-none\"\n        }\n        return \"mainPage\"\n    }\n\n    // 每秒更新时间\n    async updateTime(currentCity){\n        this.getTime(currentCity);\n        // this.timer = setInterval(() => {\n        //     this.getTime(currentCity);            \n        // }, 1000)\n    }\n\n    // 提交地点后，更新七天的天气\n    updateWeather(currentCity){\n        this.getWeather(currentCity)\n    }\n\n    render() {\n        const {currentCity} = this.state\n        console.log(currentCity)\n        const {todayMonth,todayDate,todayHour,todayMinute} = this.state\n        const date = `${todayMonth}.${todayDate} ${todayHour}${todayMinute}`\n\n        return(\n          <>\n            <div>\n              <div className=\"mainPage\">\n                <div className={this.changePage()}>\n\n                  <HomePageBackground />\n\n                  <div className=\"mainPage__webName\">\n                    <h1>\n                      Find Your Weather.\n                    </h1>   \n                    <IoRainyOutline className=\"mainPage__webIcon\" />\n                  </div>\n\n                  <div className=\"mainPage__SearchBar\">\n                    <div id='form'>\n                      <form onSubmit={this.handleSubmit}>\n                        <input\n                          onChange={this.handleOnChangeCity}\n                          className=\"mainPage__search\"\n                          type=\"text\"\n                          name=\"search\"\n                          placeholder=\"enter your city\"\n                        />\n                      </form>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              \n              <div className='weatherPage'>\n                <div className=\"weatherPage__background\" />\n\n                <div className=\"weatherPage__content\">\n                  <div className=\"weatherPage__search\">\n                    <form onSubmit={this.handleSubmit}>\n                      <input \n                        onChange={this.handleOnChangeCity}\n                        className=\"weatherPage__search--input\" \n                        type=\"text\" \n                        onClick={this.cc}\n                        placeholder=\"Search\"\n                      />\n                    </form>\n                  </div>          \n                </div>\n            \n                <DetailToday \n                  todayDetail={currentCity}\n                  todayTime={date}\n                />\n            \n                <Detail7Days city={currentCity} />\n\n              </div>\n            </div>\n          </>\n        )\n    }\n}\n  \nexport default Home\n","/Users/dongyu/Downloads/weather-app-v2/src/Components/Detail7Days.js",["67","68"],"/Users/dongyu/Downloads/weather-app-v2/src/Components/HomeBackground.js",[],"/Users/dongyu/Downloads/weather-app-v2/src/Components/DetailToday.js",[],"/Users/dongyu/Downloads/weather-app-v2/src/NavBar/Button.js",[],"/Users/dongyu/Downloads/weather-app-v2/src/NavBar/Navbar.js",[],"/Users/dongyu/Downloads/weather-app-v2/src/NavBar/MenuItem.js",[],["69","70","71","72","73"],"/Users/dongyu/Downloads/weather-app-v2/src/NavBar/Menuitem.js",[],{"ruleId":"74","replacedBy":"75"},{"ruleId":"76","replacedBy":"77"},{"ruleId":"78","replacedBy":"79"},{"ruleId":"80","replacedBy":"81"},{"ruleId":"82","replacedBy":"83"},{"ruleId":"84","severity":1,"message":"85","line":95,"column":9,"nodeType":"86","messageId":"87","endLine":95,"endColumn":20},{"ruleId":"84","severity":1,"message":"85","line":99,"column":9,"nodeType":"86","messageId":"87","endLine":99,"endColumn":20},{"ruleId":"84","severity":1,"message":"85","line":109,"column":9,"nodeType":"86","messageId":"87","endLine":109,"endColumn":20},{"ruleId":"84","severity":1,"message":"85","line":135,"column":9,"nodeType":"86","messageId":"87","endLine":135,"endColumn":20},{"ruleId":"84","severity":1,"message":"85","line":159,"column":9,"nodeType":"86","messageId":"87","endLine":159,"endColumn":20},{"ruleId":"84","severity":1,"message":"85","line":189,"column":9,"nodeType":"86","messageId":"87","endLine":189,"endColumn":20},{"ruleId":"84","severity":1,"message":"85","line":200,"column":9,"nodeType":"86","messageId":"87","endLine":200,"endColumn":20},{"ruleId":"84","severity":1,"message":"85","line":236,"column":9,"nodeType":"86","messageId":"87","endLine":236,"endColumn":20},{"ruleId":"84","severity":1,"message":"85","line":258,"column":9,"nodeType":"86","messageId":"87","endLine":258,"endColumn":20},{"ruleId":"84","severity":1,"message":"85","line":47,"column":9,"nodeType":"86","messageId":"87","endLine":47,"endColumn":20},{"ruleId":"84","severity":1,"message":"85","line":59,"column":9,"nodeType":"86","messageId":"87","endLine":59,"endColumn":20},{"ruleId":"74","replacedBy":"88"},{"ruleId":"76","replacedBy":"89"},{"ruleId":"78","replacedBy":"90"},{"ruleId":"80","replacedBy":"91"},{"ruleId":"82","replacedBy":"92"},"lines-around-directive",["93"],"global-require",[],"no-buffer-constructor",[],"no-new-require",[],"no-path-concat",[],"no-console","Unexpected console statement.","MemberExpression","unexpected",["93"],[],[],[],[],"padding-line-between-statements"]